<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Расписание</title>
<style>
body { font-family: Arial; padding: 20px; background: #f4f4f4; }
select { padding: 6px; margin-right: 10px; }
.card {
  background: #fff;
  padding: 12px;
  margin: 10px 0;
  border-radius: 8px;
}
</style>
</head>
<body>

<h2>Расписание</h2>

<select id="group"></select>
<select id="subgroup">
  <option value="">Все подгруппы</option>
  <option value="1">1 подгруппа</option>
  <option value="2">2 подгруппа</option>
</select>

<div id="list"></div>

<script>
fetch("https://raw.githubusercontent.com/bypasslibrary/hurnal/main/data.json")
  .then(r => r.json())
  .then(data => {
    const groupSel = document.getElementById("group");
    const list = document.getElementById("list");

    [...new Set(data.map(x => x.group))].forEach(g => {
      const o = document.createElement("option");
      o.value = g;
      o.textContent = "Группа " + g;
      groupSel.appendChild(o);
    });

    function render() {
      list.innerHTML = "";
      const g = groupSel.value;
      const sg = document.getElementById("subgroup").value;

      data
        .filter(x => x.group === g)
        .filter(x => !sg || String(x.subgroup) === sg)
        .forEach(x => {
          list.innerHTML += `
            <div class="card">
              <b>${x.weekday} • ${x.date}</b><br>
              Пара ${x.pair} (${x.lesson})<br>
              ${x.subject}<br>
              ${x.teacher || ""}<br>
              Аудитория: ${x.room || "-"}
            </div>
          `;
        });
    }

    groupSel.onchange = render;
    document.getElementById("subgroup").onchange = render;
    groupSel.selectedIndex = 0;
    render();
  });
</script>

</body>
</html>
